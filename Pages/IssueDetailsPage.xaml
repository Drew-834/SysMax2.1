<Page x:Class="SysMax2._1.Pages.IssueDetailsPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:SysMax2._1.Pages"
      mc:Ignorable="d" 
      d:DesignHeight="650" d:DesignWidth="1000"
      Title="Issue Details">

    <Page.Resources>
        <Style x:Key="CardStyle" TargetType="Border">
            <Setter Property="Background" Value="#252525"/>
            <Setter Property="BorderBrush" Value="#333333"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="15"/>
            <Setter Property="Margin" Value="10"/>
        </Style>

        <Style x:Key="CardHeaderStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin" Value="0,0,0,15"/>
        </Style>

        <Style x:Key="ActionButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#3498db"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="15,8"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}" 
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="4">
                            <ContentPresenter HorizontalAlignment="Center" 
                                              VerticalAlignment="Center" 
                                              Margin="{TemplateBinding Padding}"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#2980b9"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#1f6aa5"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="SectionTitleStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Foreground" Value="#BBBBBB"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin" Value="0,15,0,10"/>
        </Style>

        <Style x:Key="TroubleshootingStepStyle" TargetType="Border">
            <Setter Property="Background" Value="#2a2a2a"/>
            <Setter Property="BorderBrush" Value="#333333"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="CornerRadius" Value="6"/>
            <Setter Property="Padding" Value="15"/>
            <Setter Property="Margin" Value="0,0,0,10"/>
        </Style>
    </Page.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid Margin="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <Grid Grid.Row="0">
                <TextBlock Text="Issue Details" FontSize="24" Foreground="White" FontWeight="SemiBold"/>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button x:Name="BackButton" Content="← Back to Overview" Style="{StaticResource ActionButtonStyle}" Click="BackButton_Click"/>
                </StackPanel>
            </Grid>

            <!-- Issue Summary -->
            <Border Grid.Row="1" Style="{StaticResource CardStyle}" Margin="0,15,0,0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <TextBlock Grid.Row="0" Text="Issue Summary" Style="{StaticResource CardHeaderStyle}"/>

                    <Grid Grid.Row="1">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock x:Name="IssueIcon" Grid.Column="0" Text="⚠️" FontSize="48" 
                                   Margin="0,0,20,0" VerticalAlignment="Top"/>

                        <StackPanel Grid.Column="1">
                            <TextBlock x:Name="IssueTitle" Text="Disk Space Low" FontSize="18" 
                                       Foreground="White" FontWeight="SemiBold" Margin="0,0,0,10"/>

                            <TextBlock x:Name="IssueDescription" TextWrapping="Wrap" Foreground="#DDDDDD"
                                       Text="Your disk is getting full. This might slow down your computer and prevent updates from installing correctly."/>

                            <Grid Margin="0,15,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <StackPanel Grid.Column="0" Margin="0,0,20,0">
                                    <TextBlock Text="Severity" Foreground="#BBBBBB" FontSize="12"/>
                                    <TextBlock x:Name="IssueSeverity" Text="Medium" Foreground="#f39c12" FontWeight="SemiBold"/>
                                </StackPanel>

                                <StackPanel Grid.Column="1">
                                    <TextBlock Text="Detected" Foreground="#BBBBBB" FontSize="12"/>
                                    <TextBlock x:Name="IssueDetected" Text="2023-02-26 10:15 AM" Foreground="#DDDDDD"/>
                                </StackPanel>

                                <StackPanel Grid.Column="2">
                                    <TextBlock Text="Impact" Foreground="#BBBBBB" FontSize="12"/>
                                    <TextBlock x:Name="IssueImpact" Text="Performance" Foreground="#DDDDDD"/>
                                </StackPanel>
                            </Grid>
                        </StackPanel>
                    </Grid>
                </Grid>
            </Border>

            <!-- How to Fix -->
            <Border Grid.Row="2" Style="{StaticResource CardStyle}" Margin="0,15,0,0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <TextBlock Grid.Row="0" Text="How to Fix" Style="{StaticResource CardHeaderStyle}"/>

                    <StackPanel Grid.Row="1">
                        <TextBlock Text="RECOMMENDED ACTIONS" Style="{StaticResource SectionTitleStyle}"/>

                        <!-- Steps Container -->
                        <StackPanel x:Name="TroubleshootingSteps">
                            <!-- Step 1 -->
                            <Border Style="{StaticResource TroubleshootingStepStyle}">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <Border Grid.Column="0" Width="28" Height="28" Background="#3498db" CornerRadius="14"
                                           HorizontalAlignment="Left" VerticalAlignment="Top" Margin="0,0,15,0">
                                        <TextBlock Text="1" Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center" FontWeight="SemiBold"/>
                                    </Border>

                                    <StackPanel Grid.Column="1">
                                        <TextBlock Text="Run Disk Cleanup" Foreground="White" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                        <TextBlock TextWrapping="Wrap" Foreground="#DDDDDD">
                                            Disk Cleanup will remove temporary files, emptying the Recycle Bin, and removing other system files that are no longer needed.
                                        </TextBlock>
                                        <Button Content="Run Disk Cleanup" HorizontalAlignment="Left" Margin="0,10,0,0"
                                               Background="#2a2a2a" Foreground="White" BorderThickness="0" Padding="10,5"
                                               Tag="DiskSpace" Click="FixAction_Click"/>
                                    </StackPanel>
                                </Grid>
                            </Border>

                            <!-- Step 2 -->
                            <Border Style="{StaticResource TroubleshootingStepStyle}">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <Border Grid.Column="0" Width="28" Height="28" Background="#3498db" CornerRadius="14"
                                           HorizontalAlignment="Left" VerticalAlignment="Top" Margin="0,0,15,0">
                                        <TextBlock Text="2" Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center" FontWeight="SemiBold"/>
                                    </Border>

                                    <StackPanel Grid.Column="1">
                                        <TextBlock Text="Uninstall Unnecessary Programs" Foreground="White" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                        <TextBlock TextWrapping="Wrap" Foreground="#DDDDDD">
                                            Remove applications you no longer use to free up additional disk space.
                                        </TextBlock>
                                        <Button Content="Open Programs and Features" HorizontalAlignment="Left" Margin="0,10,0,0"
                                               Background="#2a2a2a" Foreground="White" BorderThickness="0" Padding="10,5"
                                               Tag="UninstallPrograms" Click="FixAction_Click"/>
                                    </StackPanel>
                                </Grid>
                            </Border>

                            <!-- Step 3 -->
                            <Border Style="{StaticResource TroubleshootingStepStyle}">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <Border Grid.Column="0" Width="28" Height="28" Background="#3498db" CornerRadius="14"
                                           HorizontalAlignment="Left" VerticalAlignment="Top" Margin="0,0,15,0">
                                        <TextBlock Text="3" Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center" FontWeight="SemiBold"/>
                                    </Border>

                                    <StackPanel Grid.Column="1">
                                        <TextBlock Text="Use Storage Sense" Foreground="White" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                        <TextBlock TextWrapping="Wrap" Foreground="#DDDDDD">
                                            Enable Windows Storage Sense to automatically free up space by removing temporary files and content from the recycle bin.
                                        </TextBlock>
                                        <Button Content="Open Storage Settings" HorizontalAlignment="Left" Margin="0,10,0,0"
                                               Background="#2a2a2a" Foreground="White" BorderThickness="0" Padding="10,5"
                                               Tag="StorageSettings" Click="FixAction_Click"/>
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </StackPanel>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Additional Information -->
            <Border Grid.Row="3" Style="{StaticResource CardStyle}" Margin="0,15,0,0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <TextBlock Grid.Row="0" Text="Additional Information" Style="{StaticResource CardHeaderStyle}"/>

                    <StackPanel Grid.Row="1">
                        <TextBlock x:Name="AdditionalInfoText" TextWrapping="Wrap" Foreground="#DDDDDD">
                            Having enough free disk space is important for your computer's performance. Windows and applications need free space for temporary files, updates, and virtual memory.
                            <LineBreak/><LineBreak/>
                            When disk space gets low, your computer may:
                            <LineBreak/>
                            • Run slower
                            <LineBreak/>
                            • Have trouble installing updates
                            <LineBreak/>
                            • Show more frequent disk errors
                            <LineBreak/>
                            • Experience unexpected crashes
                            <LineBreak/><LineBreak/>
                            It's recommended to keep at least 15-20% of your disk space free at all times for optimal performance.
                        </TextBlock>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- IT Professionals Section -->
            <Expander Grid.Row="4" Header="For IT Professionals" Margin="10,15,10,0" 
                     Background="#252525" Foreground="White" BorderBrush="#333333" BorderThickness="1">
                <StackPanel Margin="10">
                    <TextBlock x:Name="ITProInfoText" TextWrapping="Wrap" Foreground="#DDDDDD">
                        <Run FontWeight="SemiBold">Technical Details:</Run>
                        <LineBreak/>
                        Low disk space can impact system performance through reduced paging file size, fragmentation, and slower I/O operations. 
                        The typical threshold for performance degradation begins at 10% remaining free space.
                        <LineBreak/><LineBreak/>
                        <Run FontWeight="SemiBold">System Information:</Run>
                        <LineBreak/>
                        • Drive: C:\
                        <LineBreak/>
                        • File System: NTFS
                        <LineBreak/>
                        • Total Size: 500 GB
                        <LineBreak/>
                        • Free Space: 58.5 GB (11.7%)
                        <LineBreak/>
                        • Fragmentation Level: 12%
                        <LineBreak/><LineBreak/>
                        <Run FontWeight="SemiBold">Enterprise Solutions:</Run>
                        <LineBreak/>
                        • Deploy disk quotas through Group Policy
                        <LineBreak/>
                        • Use PowerShell to automate cleanup: Get-ChildItem -Path C:\Windows\Temp | Remove-Item -Force -Recurse
                        <LineBreak/>
                        • Schedule regular DISM cleanup: DISM.exe /Online /Cleanup-Image /StartComponentCleanup
                        <LineBreak/>
                        • Consider implementing Storage Spaces for hardware-level capacity expansion
                    </TextBlock>
                </StackPanel>
            </Expander>
        </Grid>
    </ScrollViewer>
</Page>